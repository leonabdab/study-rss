!function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";function r(t,e,n,r,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,o)}function o(t){return function(){var e=this,n=arguments;return new Promise((function(o,i){var c=t.apply(e,n);function a(t){r(c,o,i,a,s,"next",t)}function s(t){r(c,o,i,a,s,"throw",t)}a(void 0)}))}}n.r(e);var i=$("#rss-list"),c=$("#rss-input"),a=t=>({editId:"edit-".concat(t._id),deleteId:"delete-".concat(t._id),rssListItemId:"list-item-".concat(t._id),rssLinkId:"rss-".concat(t._id)}),s=(t,e,n)=>{$("#".concat(n)).click(o((function*(){try{var n=yield fetch("/rss/".concat(t._id),{method:"delete"});(yield n.json())&&$("#".concat(e)).remove()}catch(t){console.error("Unexpected error: ".concat(t.message,". Please try again"))}})))},d=(t,e,n)=>{$("#".concat(n)).click(o((function*(){try{var n=yield fetch("/rss/".concat(t._id),{method:"put",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({rss:c.val()})}),r=yield n.json();r&&$("#".concat(e)).html(r.rss)}catch(t){console.error("Unexpected error: ".concat(t.message,". Please try again"))}})))},l=function(){var t=o((function*(){try{var t=yield fetch("/rss/parsed/email",{method:"get",headers:{"Content-Type":"text/html"}}),e=yield t.text(),n=$("#email-preview");e?n.html(e):n.html("<h2>Nothing to send</h2>")}catch(t){console.log(t),console.error("RssPreview: ",t.message)}}));return function(){return t.apply(this,arguments)}}();var u=$("#email");function f(t,e,n,r,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,o)}function v(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){f(i,r,o,c,a,"next",t)}function a(t){f(i,r,o,c,a,"throw",t)}c(void 0)}))}}var p=$("#email"),y=$("#rss-input"),m=function(){var t=v((function*(){try{var t=JSON.stringify({rss:y.val(),email:p.val()}),e=yield fetch("/data",{method:"post",headers:{"Content-Type":"application/json; charset=utf-8"},body:t}),n=yield e.json();if(n){var r=a(n);return i.append(b(n,r)),y.val(""),d(n,r.rssLinkId,r.editId),s(n,r.rssListItemId,r.deleteId),n}}catch(t){console.error("Unexpected error: ".concat(t.message,". Try again"))}}));return function(){return t.apply(this,arguments)}}(),h=function(){var t=v((function*(){try{var t=yield fetch("/data/all",{method:"get"}),e=yield t.json();if(e)return g(e),(t=>{var e=Object.values(t).find(t=>t.email);if(e){var n=e.email;u.prop("disabled",!0),u.attr("value",n),u.val(n)}})(e),e}catch(t){console.error("Unexpected error: ".concat(t.message,". Try again"))}}));return function(){return t.apply(this,arguments)}}(),b=(t,e)=>'\n    <li id="'.concat(e.rssListItemId,'" class="list-group-item">\n      <div class="row">\n         <div id="').concat(e.rssLinkId,'" class="col-md-4">').concat(t.rss,'</div>\n         <div class="col-md-4"></div>\n         <div class="col-md-4 text-right">\n          <button id="').concat(e.editId,'" class="btn btn-secondary rss-list__button">Edit</button>\n          <button id="').concat(e.deleteId,'" class="btn btn-danger rss-list__button">Delete</button>\n        </div>\n      </div>\n    </li>'),g=t=>{t.forEach(t=>{if(t.rss){var e=a(t);i.append(b(t,e)),d(t,e.rssLinkId,e.editId),s(t,e.rssListItemId,e.deleteId)}})};function I(t,e,n,r,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,o)}$(document).ready(()=>{var t=$("#rss-email-form");h(),t.submit(t=>{t.preventDefault(),m()})}),$("#send").click(()=>{var t;(t=function*(){return yield l()},function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){I(i,r,o,c,a,"next",t)}function a(t){I(i,r,o,c,a,"throw",t)}c(void 0)}))})()})}]);